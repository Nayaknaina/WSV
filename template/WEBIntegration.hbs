<!DOCTYPE html>
<html>

<head>
    <title>
        Connect
    </title>
    <meta name="robots" content="noindex, nofollow">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="./" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.0/css/all.css">

    <link rel="stylesheet" href="https://d3cuh014go2nda.cloudfront.net/global/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/custom.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <link rel="stylesheet" type="text/css" href="/styles/loader.css">
    <script nonce="Hg5F/VDpALFrdOCYRvBAvQ==" src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script nonce="Hg5F/VDpALFrdOCYRvBAvQ==" type="text/javascript">
        window.heap = window.heap || [], heap.load = function (e, t) {
            window.heap.appid = e, window.heap.config = t = t || {};
            var r = t.forceSSL || "https:" === document.location.protocol,
                a = document.createElement("script");
            a.type = "text/javascript", a.async = !0, a.src = (r ? "https:" : "http:") + "//cdn.heapanalytics.com/js/heap-" + e + ".js";
            var n = document.getElementsByTagName("script")[0];
            n.parentNode.insertBefore(a, n);
            for (var o = function (e) {
                return function () {
                    heap.push([e].concat(Array.prototype.slice.call(arguments, 0)))
                }
            }, p = ["addEventProperties", "addUserProperties", "clearEventProperties", "identify", "resetIdentity", "removeEventProperty", "setEventProperties", "track", "unsetEventProperty"], c = 0; c < p.length; c++) heap[p[c]] = o(p[c])
        };
        heap.load("490363613");
    </script>
    <script nonce="Hg5F/VDpALFrdOCYRvBAvQ==" async
        src="https://www.googletagmanager.com/gtm.js?id=GTM-TQ5D84C&nonce=Hg5F/VDpALFrdOCYRvBAvQ=="></script>


</head>
<style>
    #integration-tab {
    width: 50%;
    margin: 50px auto;
    padding: 20px;
    background-color: #f9f9f9;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    font-family: Arial, sans-serif;
    text-align: center;
}

#integration-tab button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 10px 20px;
    margin: 10px 0;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

#integration-tab button:disabled {
    background-color: #bfbfbf;
    cursor: not-allowed;
}

#integration-tab button:hover:not(:disabled) {
    background-color: #45a049;
}

#apiKeyDisplay {
    font-weight: bold;
    color: #333;
}

#generatedUrl {
    width: 80%;
    padding: 10px;
    margin-top: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
}

#generatedUrl:focus {
    outline: none;
    border-color: #4CAF50;
}

#integration-tab input[readonly] {
    background-color: #f1f1f1;
}

p {
    margin: 15px 0;
    font-size: 16px;
    color: #555;
}

@media (max-width: 768px) {
    #integration-tab {
        width: 80%;
        padding: 15px;
    }

    #generatedUrl {
        width: 100%;
    }
}

</style>
<body>
    {{!-- {{> nav}} --}}

    <div class="container-fluid">
        <div class="row">
            {{> sidebar}}

            <div class="fg-main-content-wrap col-xl-11 col-lg-11 col-md-11 col-sm-12 p-0 p-b-30 home-section">
                <div>
                    <div class="container-fluid bg-white shadow-sm m-b-40">
                        <div class="container">
                            <div class="row page-titles p-t-35 p-b-15">
                                <div class="col-lg-12 col-12 align-self-center">
                                    <h1 class="text-bodycolor">Website Integration</h1>
                                    <p class="text-secondary font-14"> </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container min-vh-100">
                        <div id="integration-tab">
                            <button id="generateKeyBtn">Generate API Key</button>
                            <p>Your API Key: <span id="apiKeyDisplay">
                                {{#if user.apiKey}}
                                {{user.apiKey}}
                                {{else}}
                                Not Generated
                                {{/if}}
                                </span></p>

                            
                            <p>Generated URL: <input type="text" value="**************" id="generatedUrl" readonly></p>
                            <button onclick="copyToClipboard('{{user.apiKey}}')">Copy URL</button>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
const apiKeyDisplay = document.getElementById('apiKeyDisplay');
const generateKeyBtn = document.getElementById('generateKeyBtn');
const generatedUrlInput = document.getElementById('generatedUrl');

generateKeyBtn.addEventListener('click', async () => {
    try {
        const response = await axios.get('/user/generate-key');
        const data = response.data;
        apiKeyDisplay.textContent = data.apiKey;
    } catch (error) {
        alert('Error generating API key');
    }
});

function copyToClipboard(api=null) {
    if(!api) return 
    generatedUrlInput.value = `http://localhost:8000/${api}`;
    generatedUrlInput.select();
    document.execCommand('copy');
    alert('URL copied to clipboard!');
}
</script>

</body>

</html>